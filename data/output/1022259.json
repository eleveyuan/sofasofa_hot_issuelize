{"id": "1022259", "question": "如何在sage或mathematica中写代码才能得到正确的分段解，避免沉默错误？", "description": "<div class=\"col-md-11 col-xs-10\"><p style=\"user-select: auto;\">例如我们要求sqrt(2+2*cosx)的不定积分 和   0-2pi的数值积分\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">关键步骤时到了 sqrt(4*(cos(x/2))^2) 开平方后 要变成abs(2*(cos(x/2)）如果我们要求这个绝对值的不定积分 或 0 到 2pi 的数值积分。假设我们在考试。\n</p><p style=\"user-select: auto;\">那么不定积分应该写成：x属于 0-pi： 4sin(θ/2)\n</p><p style=\"user-select: auto;\">                                   x属于 pi-2pi： -4sin(θ/2)\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">数值积分当然应该在不同区间代入不同解析解求解。\n</p><p style=\"user-select: auto;\">达到以上标准才能得分。\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">可是当我用sage直接求sqrt(2+2*cosx)的不定积分，只得到了2个解中的一个，即4sin(θ/2)  。当然计算 0 到 2pi 的数值积分自然会得到错误答案0。\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\"><b style=\"user-select: auto;\">考虑到分段解在数学中非常常见。如果让软件自动给出分段解？（所谓自动的意思就是让软件自动划段，而不是人工去划段再分别计算结果） 从而避免出现沉默错误？注：该问的的讨论不局限于sage，给出mathematica的代码也可以。主要是想得到一个思路，所以代码最好有注释\n</b></p><p style=\"user-select: auto;\"><b style=\"user-select: auto;\">\n</b></p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">另外用sage求解sqrt(2-2*cosx) 的不定积分。直接给出错误答案https://sagecell.sagemath.org/?z=eJyrsC1LLNJQr1DX5MpJLEmt0MjMK0lNL0rM0dAw0jXSSs4v1qjQ1Iwz0DPVAdIAW0IN5Q==&amp;lang=sage&amp;interacts=eJyLjgUAARUAuQ==</p><p style=\"user-select: auto;\">\n</p><p style=\"user-select: auto;\">只有将计算步骤推进到2*sin(x/2) 求不定积分。才能得到正确答案。不知道应该怎样写代码才能从第一步开始计算就能得到正确答案？</p></div>", "viewer": 1213, "tags": ["数学", "微积分", "数值计算", "Matlab", "Mathematica"], "answers": []}