{"id": "1000683", "question": "sklearn cross_val_score怎么同时对多个scoring进行验证", "description": "<div class=\"col-md-11 col-xs-10\"><p>我想同时验证两个scoring，但是cross_val_score好像一次只能设定一个。</p><p>我可以分别跑两次，</p><pre><code class=\"python\">&gt;&gt;&gt; cross_val_score(clf, X, y, scoring='log_loss')\n&gt;&gt;&gt; cross_val_score(clf, X, y, scoring='roc_auc')</code></pre><p>但是太浪费时间了，我跑一次就需要3个小时，而且我的模型是一样的，只是想看这个模型在不同scoring下的分数。</p><p><span style=\"font-size: 1rem;\"><br/></span></p><p><span style=\"font-size: 1rem;\">有没有什么办法，能够实现类似</span></p><pre><code class=\"python\">&gt;&gt;&gt; cross_val_score(clf, X, y, scoring=[score1, score2, score3])</code></pre><p>这样的功能？</p></div>", "viewer": 8759, "tags": ["统计/机器学习", "模型验证", "Python"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>cross_val_score是无法做到一次交叉验证，同时返回多个不同的loss的。sklearn也许以后会增加这种功能，但是目前看来，下一版本还不会。</p><p><br/></p><p>目前可行的方案，是使用<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_predict.html\" target=\"_blank\">sklearn.model_selection.cross_val_predict</a>。</p><pre><code class=\"python\">y_cv = cross_val_predict(clf, X, y)\n\nroc_auc = metrics.roc_auc_score(y, y_cv)\n\nlogloss = metrics.log_loss(y, y_cv)\n\npr_auc = metrics.average_precision_score(y, y_cv)</code></pre><p><span style=\"font-size: 1rem;\">... ...</span><br/></p><p>这样的话，只需要做一次交叉训练，节约了时间。缺点就是无法知道每个fold的loss的数值。</p><p><br/></p></div>", "lvl2_answer": ["高代兄懂真多！"]}, {"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>写个循环就搞定了</p><p>for my_score in [score1, score2, score3, score4]:</p><p>        print cross_val_score(clf, X, y, my_score)<br/></p></div>", "lvl2_answer": ["这个本质上并没有解决题主的问题吧。"]}]}