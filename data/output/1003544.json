{"id": "1003544", "question": "怎么自定义sklearn GridSearchCV中评估函数的阈值", "description": "<div class=\"col-md-11 col-xs-10\"><p>怎么自定义sklearn GridSearchCV中评估函数的阈值，比如说我想把precision定义为大于0.7才算是true</p></div>", "viewer": 8286, "tags": ["统计/机器学习", "监督式学习", "模型验证", "Python"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>可能你需要用<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.make_scorer.html\" target=\"_blank\">make_scorer</a>自己定义一个scoring了，然后在GridSearchCV把scoring=你的scoring函数名</p><p><br/></p><p>-----二更-----</p><p>也可以不用make_scorer，自己定义一个，在自己定义的scoring里面调用predict_proba得到概率</p><p>下面是一个例子</p><pre><code class=\"python\">def my_scorer(clf, X, y_true):\n    class_labels = clf.classes_\n    y_pred_proba = clf.predict_proba(X)\n    error = ...\n    return error\n\ngs = GridSearchCV(estimator=KNeighborsClassifier(),\n                  param_grid=[{'n_neighbors': [6]}],\n                  cv=5,\n                  scoring=my_scorer)</code></pre><p><br/></p></div>", "lvl2_answer": ["但是传入到自定义scoring里面的参数是预测结果0或1，我怎么把这个预测值变成概率？", "我更新了我的回答，可以看看", "成立，十分感谢"]}]}