{"id": "1006119", "question": "mysql如何获得某字段的最大值所在行？", "description": "<div class=\"col-md-11 col-xs-10\"><p>假如有这么一个表</p><p>+------+-------+--------------------------------------+</p><p>| id   | val   | field1 | field2 |                              |</p><p>+------+-------+--------------------------------------+</p><p>| 1    | 1     | ...                                  | ... |</p><p>| 2    | 1     | ...                                  | ... |</p><p>| 1    | 2     | ...                                  | ... |</p><p>| 1    | 3     | ...                                  | ... |</p><p>+------+-------+--------------------------------------+</p><p>我想得到按照id进行groupby之后val最大的行，结果为</p><p>+------+-------+--------------------------------------+</p><p>| id | val   | field1 | field2 |                              |</p><p>+------+-------+--------------------------------------+</p><p>| 2 | 1 | ... | ... |</p><p>| 1 | 3 | ... | ... |</p><p>+------+-------+--------------------------------------+</p><p>这该如何操作？</p><p>下面的操作只能得到val的最大值，忽视了其他的字段，我需要整行的信息</p><pre><code class=\"python\">SELECT id, MAX(value) FROM my_table GROUP BY id</code></pre><p>谢谢！</p></div>", "viewer": 3397, "tags": ["算法/数据结构/数据库", "mysql"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>两种方法</p><p>第一种方法比较直接，先groupby挑出最大的，然后再回到原来的表里找到最大值所在的行</p><pre><code class=\"python\">SELECT a.*\r\nFROM YourTable a\r\nINNER JOIN (\r\n    SELECT id, MAX(val) rev\r\n    FROM YourTable\r\n    GROUP BY id\r\n) b ON a.id = b.id AND a.val = b.val</code></pre><p>第二种方法比较机智，让自己和自己做join，但是要求左边的表中val的数值小于右表中的val，否则就为空。显然空着行就是val取最大值的行</p><pre><code class=\"python\">SELECT a.*\r\nFROM YourTable a\r\nLEFT OUTER JOIN YourTable b\r\n    ON a.id = b.id AND a.val &lt; b.val\r\nWHERE b.id IS NULL;</code></pre><p><br/></p></div>", "lvl2_answer": ["厉害厉害，谢谢"]}]}