{"id": "1004674", "question": "怎么理解tweedie分布？", "description": "<div class=\"col-md-11 col-xs-10\"><p>怎么理解tweedie分布？</p></div>", "viewer": 10088, "tags": ["统计/机器学习", "概率分布"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>Tweedie分布是一种泊松分布和伽马分布的复合分布。</p><p>有三个参数，一个是$p$，当$p=1$，Tweedie就是泊松分布，当$p=2$，Tweedie就是伽马分布。</p><p>第二个参数是$\\mu$，是Tweedie分布的期望。</p><p>第三个参数是$\\phi$，控制Tweedie分布的方差。方差$Var=\\phi \\mu^p$。</p><p>直白一点理解就是，Tweedie随机变量是$X$个伽马随机变量的和。其中$X$是服从期望为$\\mu^{(2-p)/(\\phi(2-p))}$的泊松分布，其中每个伽马随机变量是独立同分布的，服从$\\Gamma((2-p)/(p-1), \\phi(p-1)\\mu^{p-1})$。</p><p>Tweedie分布最明显的一个特点是以一定的概率生成数值为0的样本。Tweedie分布在商业场景中有很多例子，比如人们进入某个商城后的消费额。一部分人只是进去随便逛逛（比如蹭空调），所以消费额是0，另一部分客户是有消费额的，是随机的连续数值。</p><p>直方图是如下效果</p><p><img data-filename=\"tweedie-distribution.png\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAACoCAMAAAB3ycOzAAAAe1BMVEX///8AougAAAAhHR04KCgoAwM3AgIcAgIxAgIZAgIeAgLc3NxFNTW3t7fBwcFbTk4iDAwIAwM9Dw9HDw92cXF+fX0QAABHOjrS0tIMAAATBAQbBQUoFxc/NDRZUlKRkZGpqanKysrt7e0TAgITAwMaFBQiFxd2c3PJyckDUqmBAAABo0lEQVR42u3Z2U7CQBiAUagLSlFc2RfF9f2f0HSmvTCBCDFipz3fzST0Hy5O0qTtdDqSVINOurFTFIAAAQIECBAgQAIECBAgQIAAARIgQIAAAQIECBAgQIAAAQIECBAgQAIECBAgQIAAARIgQIAAAQIECBAgQIAAAQIECBAgQAIECBAgQIAAARIgQIAAAQIECBAgQIAAAQIECBAgQAIECBAgQIAAARIgQIAAAQIECBAgQIAAAQIECBAgQAIECBCgpIE+r0Lrp7g+A6p6jL3N74uy17DM3wFVZXGwXM7LfSNAVS9x8OI7UA9Q1SUgQIAA/QfQKrst2gHUDRezVYuBhnFiF1BsCAgQIECAjgs0uQ6N9wEax9lJq4CWs7ui6T5A0zA6W7YKaBAvne0DVA4NAAECBAgQIECAEgbabD4eQovDgRbFvqYD5Xl5tDM6HChsadSp4lagm/hb/3CgfuMOzf4UqAfoB6AGfAsBBCgBoJQfkgABSgeo/L+0ngK2vosdCyiFD/51AKr1HVgjoPLVL8vzOsB0G99vhbKW1JEkSZKk2vQFXI8l3GLaofEAAAAASUVORK5CYII=\" style=\"width: 399px; height: 232.75000000000003px;\"/><br/></p></div>", "lvl2_answer": ["谢谢！"]}, {"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>用python可以简单实现一下生成tweedie分布随机变量</p><pre><code class=\"python\">import numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\ndef tweedie(n,p,mu,phi):\r\n    #checking the value of variance power between 1-2\r\n    result = np.full(n, np.nan)\r\n    # calculating mean of poisson distribution\r\n    lambdaa = mu ** (2 - p) / (phi * (2 - p))\r\n    # shape parameter of gamma distribution\r\n    alpha = (2 - p) / (1 - p)\r\n    # scale parameter of gamma distribution\r\n    gam = phi * (p - 1) * ( mu ** (p - 1))\r\n    # Generating Poisson random sample\r\n    rs = np.random.poisson(lambdaa, n)\r\n    for i in range(n):\r\n    # Generate single data point of gamma distribution using poisson random variable\r\n        result[i] = np.random.gamma(rs[i] * np.abs(alpha), gam, 1)\r\n    return result\r\n\r\nx = tweedie(100000, 1.2, 3, 2)\r\nplt.hist(x, bins=40)\r\nplt.show()</code></pre><p>上面随机产生了100000个随机点，分布如下。可以看出有很多0。</p><p><img data-filename=\"tweed (1).png\" src=\"data:image/png;base64,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\" style=\"width: 426.5px; height: 274.8797953964194px;\"/><br/></p></div>", "lvl2_answer": ["谢谢！"]}]}