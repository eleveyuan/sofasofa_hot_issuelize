{"id": "1005641", "question": "为什么Keras和Pytorch都是把模型保存成h5的格式而不是pkl格式？", "description": "<div class=\"col-md-11 col-xs-10\"><p>为什么Keras和Pytorch都是把模型保存成h5的格式而不是pkl格式？有特别的原因吗？</p></div>", "viewer": 6244, "tags": ["统计/机器学习", "Python", "TensorFlow", "I/O"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p><span style=\"font-size: 14px;\">不建议把神经网络模型或者数据集存成pkl格式，因为太占用空间了。</span><span style=\"font-size: 14px;\">h5更小。</span></p><p><span style=\"font-size: 14px;\">在h5中</span><span style=\"font-size: 14px;\">100mb的模型，存到pkl里要300mb以上。</span></p></div>", "lvl2_answer": []}, {"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>可以保存为pkl格式的，你可以在Pytorch中这样试试： </p><p>#保留全部的神经网络</p><p>torch.save(net1 ,'net.pkl')    # net1 是你要保存的网络</p><p>net2 = torch.load('.//pkl//net.pkl')    # 加载你的网络</p><p><br/></p><p>#只保留神经网络的参数</p><p>torch.save(net1.state_dict(), 'net_params.pkl' )</p><p># 用参数还原神经网络 ！！首先我们必须创造一个和原来具有一样结构的神经网络</p><p>net2 = torch.load('.//pkl//net.pkl')</p><p><br/></p><p><a href=\"http://sofasofa.io/tutorials/pytorch_tutorials/\">http://sofasofa.io/tutorials/pytorch_tutorials/</a> 这里有一篇Pytorch的简单教程</p></div>", "lvl2_answer": ["pkl太大了，一般存成h5吧"]}]}