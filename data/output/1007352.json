{"id": "1007352", "question": "目标约束回归", "description": "<div class=\"col-md-11 col-xs-10\"><p>18维输入（x1,x2....x18）9维输出(y11,y12,y13,y21,y22.y23,y31,y32,y33)做回归，用sklearn库，如何在算法中约束输出？比如：y11+y12+y13=1  y21+y22+y23=1 y31+y32+y33=1 </p></div>", "viewer": 1426, "tags": ["统计/机器学习", "回归分析", "监督式学习"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>你的输出中线性相关性，所以可把已知相关的y给去掉。</p><p>去掉之后你的回归是：</p><p>18维输入（x1,x2....x18）6维输出(y12,y13,y22.y23,y32,y33)</p><p>然后再根据已知限制条件计算得到</p><p>y11 = 1 - y12 - y13</p><p>y21 = 1 - y22 - y23</p><p>y31 = 1 - y32 - y33</p></div>", "lvl2_answer": ["这是我的单输入两输出模型，输入：5维  输出----fc_a：3维（要求：3个维度输出之和为1）、fc_b：2维 .\n。。。\nx = tf.keras.layers.Dense(64)(inputs) \nx = tf.keras.layers.Dense(64)(x) \nfc_a=tf.keras.layers.Dense(name='fc_a',units=3,activation=tf.nn.softmax)(x) \nfc_b=tf.keras.layers.Dense(name='fc_b',units=2)(x) \nmodel = tf.keras.Model(inputs=inputs, outputs=[fc_a, fc_b])  \nmodel.compile(optimizer='Adam', loss='mean_squared_error',metrics=['mse']) \nhistory=model.fit(X_train,[y1_train,y2_train],epochs=300,batch_size=10) \n。。。\n预测效果不好，请问，如何进行约束呢？自定义loss 或者激励函数？查了半天，keras的loss都是定义在y_pred 与y_true上的"]}]}