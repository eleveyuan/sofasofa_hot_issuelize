{"id": "1000430", "question": "sklearn OneHotEncoder string类型报错", "description": "<div class=\"col-md-11 col-xs-10\"><p>我的数据集里面，有的变量是categorical的，比如国家，所以我需要做One Hot Encoding。</p><p>但是用OneHotEncoder会报错。</p><pre><code class=\"python\">&gt;&gt;&gt; from sklearn.preprocessing import OneHotEncoder\n&gt;&gt;&gt; enc = OneHotEncoder(categorical_features=['a'])\n&gt;&gt;&gt; new_df = enc.fit_transform(df)</code></pre><pre><code class=\"python\">ValueError: could not convert string to float</code></pre><p>这个错误是什么意思？难道sklearn.preprocessing.OneHotEncoder只认识数值的？不能处理字符串类型的？</p></div>", "viewer": 9416, "tags": ["统计/机器学习", "数据预处理", "Python"], "answers": [{"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>可以用pandas的get_dummies</p><pre><code class=\"python\">df[feature] = df['country'].astype('category')\ndf = pandas.get_dummies(df, columns=['country'])</code></pre><p><br/></p></div>", "lvl2_answer": []}, {"lvl1_answer": "<div class=\"col-md-11 col-xs-10 p-r\"><p>对于字符类型，你需要先做LabelEncoder，把它转成整数类型，然后再用OneHotEncoder</p><p>具体代码可以参考我在这个问题里的回答：<a href=\"http://sofasofa.io/forum_main_post.php?postid=1003039\" target=\"_blank\">sklearn onehotencoder的具体用法是什么</a></p><p><br/></p></div>", "lvl2_answer": []}]}